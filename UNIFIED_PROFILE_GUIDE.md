# ç»Ÿä¸€ç”¨æˆ·èµ„æ–™ç®¡ç†ç³»ç»Ÿä½¿ç”¨æŒ‡å—

## ğŸ¯ æ¶æ„æ¦‚è§ˆ

ä½ çš„é¡¹ç›®ç°åœ¨é‡‡ç”¨äº†**PostgreSQLä¸ºä¸»çš„ç»Ÿä¸€æ•°æ®ç®¡ç†æ¶æ„**ï¼š

```
ç”¨æˆ·èŠå¤© â†’ ProfileExtractionService â†’ PostgreSQL (ä¸»è¦æ•°æ®æº)
                                   â†“
                           AIæœåŠ¡ (MongoDB ç¼“å­˜å±‚)
                                   â†“
                           æ¨èæ¨¡å‹ â† ç‰¹å¾æ•°æ®
```

## ğŸ“Š å…³é”®æ”¹è¿›

### 1. **æ‰©å±•çš„PostgreSQL Schema**
- âœ… æ”¯æŒæ‰€æœ‰æ¨èæ¨¡å‹æ‰€éœ€çš„features
- âœ… åŒ…å«è®¡ç®—çš„æ ‡ç­¾ç‰¹å¾ (gpaTag, paperTagç­‰)
- âœ… æ”¯æŒå¤æ‚æ•°æ®å­˜å‚¨ (JSONå­—æ®µ)
- âœ… åº”ç”¨å†å²è®°å½•è¿½è¸ª

### 2. **å¢å¼ºçš„ProfileExtractionService**
- âœ… è‡ªåŠ¨è®¡ç®—æ¨èæ¨¡å‹æ ‡ç­¾ç‰¹å¾
- âœ… æ™ºèƒ½å¤§å­¦ç±»å‹æ¨æ–­ (985/211/æµ·å¤–/æ™®é€š)
- âœ… GPAæ ‡å‡†åŒ– (æ”¯æŒ4.0/5.0/100åˆ†åˆ¶)
- âœ… AIé©±åŠ¨çš„ä¸ªæ€§åŒ–åç»­é—®é¢˜ç”Ÿæˆ

### 3. **å®Œæ•´çš„æ•°æ®è¿ç§»æ”¯æŒ**
- âœ… è‡ªåŠ¨è¿ç§»ç°æœ‰ç”¨æˆ·æ•°æ®åˆ°æ–°ç»“æ„
- âœ… è®¡ç®—å†å²æ•°æ®çš„ç‰¹å¾æ ‡ç­¾
- âœ… ç”Ÿæˆæ ·æœ¬åº”ç”¨å†å²è®°å½•

## ğŸš€ å¦‚ä½•ä½¿ç”¨

### ç«‹å³å¼€å§‹ä½¿ç”¨ï¼š

1. **ç”Ÿæˆæ•°æ®åº“è¿ç§»ï¼š**
```bash
cd backend
npm run migrate:generate
```

2. **åº”ç”¨æ•°æ®åº“æ›´æ”¹ï¼š**
```bash
npm run db:migrate
```

3. **è¿ç§»ç°æœ‰ç”¨æˆ·æ•°æ®ï¼š**
```bash
npm run migrate:profiles
```

4. **ç”ŸæˆPrismaå®¢æˆ·ç«¯ï¼š**
```bash
npm run db:generate
```

### åœ¨ä»£ç ä¸­ä½¿ç”¨ï¼š

```typescript
// è·å–æ¨èæ¨¡å‹æ‰€éœ€çš„ç‰¹å¾
const features = await profileExtractor.getModelFeatures(userId)

// features åŒ…å«ï¼š
// - åŸºç¡€ç‰¹å¾: gpa, toefl, ielts, gre, gmat
// - æ ‡ç­¾ç‰¹å¾: gpa_tag, toefl_tag, paper_tag ç­‰
// - ç”³è¯·ç›®æ ‡: target_major, target_country
// - å…¶ä»–ç‰¹å¾: has_research_experience, publication_count
```

## ğŸ“ˆ æ”¯æŒçš„æ¨èæ¨¡å‹Features

### åŸºç¡€å­¦æœ¯ç‰¹å¾ï¼š
- `gpa`, `gre`, `gmat`, `ielts`, `toefl`
- `averageGPA` (æ ‡å‡†åŒ–4.0åˆ¶)
- `major`, `undergraduateUniversity`

### æ ‡ç­¾ç‰¹å¾ (è‡ªåŠ¨è®¡ç®—)ï¼š
- `gpa_tag`: 1.0(ä½) / 2.0(ä¸­) / 3.0(é«˜)
- `paper_tag`: 1.0(æ— ) / 2.0(æ°´) / 3.0(å¤š) / 4.0(ç‰›)
- `toefl_tag`: 1.0(ä½) / 2.0(ä¸­) / 3.0(é«˜)
- `gre_tag`: 1.0(L) / 2.0(M) / 3.0(H)
- `research_tag`: 0.0(æ— ) / 1.0(æœ‰)
- `college_type_tag`: 0.0(åŒé) / 1.0(985/211) / 2.0(æµ·å¤–)
- `recommendation_tag`: 0.0(æ— ç‰›æ¨) / 1.0(å›½å†…) / 2.0(å›½å¤–)

### ç”³è¯·ç›¸å…³ï¼š
- `target_major`, `target_country`, `target_degree`
- `application_year`, `application_term`

## ğŸ”„ æ•°æ®æµ

1. **ç”¨æˆ·èŠå¤©** â†’ AIæå–èµ„æ–™ä¿¡æ¯
2. **ProfileExtractionService** â†’ å¤„ç†å¹¶è®¡ç®—ç‰¹å¾æ ‡ç­¾
3. **PostgreSQL** â†’ å­˜å‚¨å®Œæ•´ç”¨æˆ·èµ„æ–™
4. **AIæœåŠ¡** â†’ å¼‚æ­¥åŒæ­¥(å¯é€‰ç¼“å­˜)
5. **æ¨èæ¨¡å‹** â†’ ä½¿ç”¨ç»Ÿä¸€ç‰¹å¾æ•°æ®

## ğŸ’¡ æ ¸å¿ƒä¼˜åŠ¿

- **å•ä¸€æ•°æ®æº**: PostgreSQLä½œä¸ºå”¯ä¸€çœŸå®æ¥æº
- **è‡ªåŠ¨ç‰¹å¾è®¡ç®—**: æ— éœ€æ‰‹åŠ¨è®¡ç®—æ¨èæ¨¡å‹æ ‡ç­¾
- **æ™ºèƒ½æ•°æ®æ¨æ–­**: è‡ªåŠ¨è¯†åˆ«é™¢æ ¡ç±»å‹ã€æ ‡å‡†åŒ–GPA
- **å®Œæ•´æ•°æ®å†å²**: è¿½è¸ªç”³è¯·å†å²å’Œé¢„æµ‹ç»“æœ
- **é«˜æ€§èƒ½æŸ¥è¯¢**: æ”¯æŒå¤æ‚SQLæŸ¥è¯¢å’Œåˆ†æ
- **æ•°æ®ä¸€è‡´æ€§**: äº‹åŠ¡ä¿è¯ï¼Œé¿å…åŒæ­¥é—®é¢˜

## ğŸ‰ ä¸‹ä¸€æ­¥

ä½ çš„ç»Ÿä¸€ç”¨æˆ·èµ„æ–™ç®¡ç†ç³»ç»Ÿå·²ç»å‡†å¤‡å°±ç»ªï¼ç°åœ¨ä½ å¯ä»¥ï¼š

1. ä»èŠå¤©ä¸­æ™ºèƒ½æå–ç”¨æˆ·èµ„æ–™
2. è‡ªåŠ¨è®¡ç®—æ‰€æœ‰æ¨èæ¨¡å‹ç‰¹å¾
3. ä¸ºç”¨æˆ·æä¾›ä¸ªæ€§åŒ–çš„é™¢æ ¡æ¨è
4. è¿½è¸ªç”³è¯·å†å²å’ŒæˆåŠŸç‡

æ‰€æœ‰è¿™äº›éƒ½åŸºäºä¸€ä¸ªç»Ÿä¸€ã€å¯é çš„PostgreSQLæ•°æ®å­˜å‚¨ï¼ğŸš€